% ===================================================================
% MAIN CONFIGURATION FILE
% This file sets up the layout, imports packages, and organizes the structure.
% ===================================================================

\documentclass[11pt,twoside]{article}

% --- ENCODING & FONTS ---
% Essential for handling special characters and font rendering
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{times}      % Sets the font to Times New Roman style
\usepackage{lmodern}    % Improved font rendering

% --- PAGE LAYOUT ---
% Defines margins to match the Polimi standard
\usepackage{geometry}
\geometry{
    a4paper,
    left=25mm,
    right=25mm,
    top=30mm,
    bottom=25mm,
    headsep=7mm
}
\interfootnotelinepenalty=10000 % Prevents footnotes from breaking across pages

% --- HEADER & FOOTER CONFIGURATION ---
\usepackage{fancyhdr}
\usepackage[dvipsnames, table]{xcolor} % Allows custom colors

% Define the specific Polimi Blue and Gray colors
\definecolor{Blue}{RGB}{0,51,153} 
\definecolor{Gray}{RGB}{128,128,128}

% Set up the header/footer style
\pagestyle{fancy}
\fancyhf{} % Clear defaults
\lhead{\color{Gray}{\small{Best Bike Paths (BBP) project by Haipeng Zhu}}} % Top Left
\lfoot{\textcolor{Gray}{\small{Copyright © 2025, Haipeng Zhu – All rights reserved}}} % Bottom Left
\rfoot{\textcolor{Gray}{\thepage}} % Bottom Right: Page Number
\renewcommand{\headrulewidth}{0pt} % Remove the horizontal line in the header

% --- IMAGE HANDLING ---
\usepackage{graphicx}
% [IMPORTANT]: Tells LaTeX where to look for images.
% It checks 'Images', then 'DeliveryFolder/Images', then current folder.
\graphicspath{{Images/}{DeliveryFolder/Images/}{./}} 

% --- TABLES & LISTS ---
\usepackage{booktabs}   % For professional looking tables
\usepackage{tabu}       % For the title page table
\usepackage{longtable}  % For tables that span multiple pages
\usepackage{enumitem}   % For customizing bullet points

% --- HYPERLINKS ---
\usepackage[pdftex, colorlinks]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,    % Table of Contents links are black
    urlcolor=Blue,      % URLs are Blue
    citecolor=Blue      % Citations are Blue
}

% 在 \begin{document} 之前确保包含以下宏包
\usepackage{float}       % 必须！用于 [H] 强制图片位置，防止图片乱跳
\usepackage{tabularx}    % 建议！比 tabu 更稳定
\usepackage{ltablex}     % 用于处理跨页表格
\usepackage[table]{xcolor} % 用于表格行染色

% 修正路径设置 (确保包含所有可能存放图片的路径)
\graphicspath{{./}{Files/}{Images/}}
% ===================================================================
% DOCUMENT BEGINS HERE
% ===================================================================
\begin{document}

% --- TITLE PAGE ---
\begin{titlepage}
    % The logo and project name are inside a table for alignment
    {\begin{table}[t!]
            \centering
            \begin{tabu} to \textwidth { X[1.3,r,p] X[1.7,l,p] }
                \textcolor{Blue}{\textbf{\small{Best Bike Paths (BBP) project}}} &
                % Make sure 'PolimiLogo.png' exists in the 'Images/' folder!
                \includegraphics[scale=0.5]{PolimiLogo}
            \end{tabu}
        \end{table}}~\\ [7cm]

    % Main Document Title
    \begin{flushleft}
        {\textcolor{Blue}{\textbf{\Huge{Design Document}}}} \\ [1cm]
    \end{flushleft}
\end{titlepage}

% --- DOCUMENT INFO TABLE ---
% Metadata about the document version and authors
\begin{table}[h!]
    \begin{tabu} to \textwidth { X[0.3,r,p] X[0.7,l,p] }
        \hline
        \textbf{Deliverable:}   & DD (Design Document)                                \\
        \textbf{Title:}         & Design Document                                     \\
        \textbf{Authors:}       & Haipeng Zhu                                         \\
        \textbf{Version:}       & 1.0                                                 \\
        \textbf{Date:}          & \today                                              \\
        \textbf{Download page:} & [LINK TO GITHUB]                                    \\
        \textbf{Copyright:}     & Copyright © 2025, Haipeng Zhu – All rights reserved \\
        \hline
    \end{tabu}
\end{table}

\setcounter{page}{2} % Start counting pages

% --- TABLE OF CONTENTS ---
\newpage
\tableofcontents
\newpage
\listoffigures % Generates a list of all images
\listoftables  % Generates a list of all tables

% ===================================================================
% CONTENT MODULES (Importing Chapters)
% Note: We apply the Blue Color to the Section Titles here in main.tex
% ===================================================================

% 1. Introduction
\clearpage
{\color{Blue}{\section{Introduction}}}
\label{sect:introduction}
\input{Files/introduction} % Imports content from Files/introduction.tex

% 2. Architectural Design (The most important section for DD)
\clearpage
{\color{Blue}{\section{Architectural Design}}}
\label{sect:arch_design}
\input{Files/architectural_design} 

% 3. User Interface Design
\clearpage
{\color{Blue}{\section{User Interface Design}}}
\label{sect:ui_design}
\input{Files/user_interface}

% 4. Requirements Traceability
\clearpage
{\color{Blue}{\section{Requirements Traceability}}}
\label{sect:req_traceability}
\input{Files/requirements_traceability}

% 5. Implementation, Integration & Testing
\clearpage
{\color{Blue}{\section{Implementation, Integration \& Testing}}}
\label{sect:testing}
\input{Files/implementation_testing}

% 6. Effort Spent
\clearpage
{\color{Blue}{\section{Effort Spent}}}
\label{sect:effort}
\input{Files/effort}

% --- REFERENCES ---
\clearpage
\addcontentsline{toc}{section}{References} % Adds References to TOC
\bibliographystyle{plain}
\bibliography{main} % Looks for main.bib file

\end{document}