\subsection{Product Perspective}

The Best Bike Paths (BBP) system is a standalone mobile application that interacts with external services (Maps and Weather) to provide value to individual cyclists. The system manages the lifecycle of two main entities: the biking \textbf{Trip} and the manually inserted \textbf{Path Information}.
\subsubsection{Scenarios}

\paragraph{Scenario 1: Personal Performance Tracking in Variable Weather}
\textbf{Actor}: Alice, an avid commuter. \\
Alice prepares for her morning commute. She launches the BBP application and ensures her GPS is locked. She taps "Start Recording" and places her phone in her handlebar mount. As she rides, the weather shifts from sunny to light rain. Unfazed, Alice continues her ride. Upon arriving at her office, she hits "Stop Recording." The system not only saves her 15km route but also automatically queries the external weather service to tag the trip with "Light Rain, 12Â°C." Reviewing her history later, Alice can analyze how weather conditions impacted her average speed compared to sunny days.

\paragraph{Scenario 2: Community Reporting of Hazardous Conditions}
\textbf{Actor}: Bob, a recreational mountain biker. \\
While exploring a popular trail, Bob encounters a fallen tree blocking the path, forcing him to dismount. He realizes this is a safety hazard for others. Once he finishes his ride and is in a safe location, Bob opens the BBP app. He navigates to the "Add Path Info" interface. He selects the specific trail segment, chooses the category "Obstacle," and types "Fallen tree blocking 80\% of the path." He selects the "Requires Maintenance" status. Crucially, he toggles the visibility to "Publishable" so that other cyclists planning a route in that area will see a warning indicator on their maps.

\paragraph{Scenario 3: Route Safety Visualization for New Cyclists}
\textbf{Actor}: Charlie, a novice cyclist. \\
Charlie wants to visit a friend across town but is nervous about riding in traffic. He opens BBP to check the route. He enters his origin and destination. The system displays the most direct path but highlights several segments in "Red." Tapping on these segments, Charlie sees user reports indicating "Heavy Potholes" and "No Bike Lane." He notices an alternative, slightly longer route highlighted in "Green," indicating "Optimal" status based on community feedback. Charlie chooses the green route, prioritizing safety over speed.

\subsubsection{Domain Model}
The Domain Model shown in Figure \ref{fig:domain_model} illustrates the static structure of the BBP system, highlighting the complexity of data management regarding trips and path reports.

The model is structured around the following key concepts:

\begin{itemize}
    \item \textbf{User}: The active agent in the system. Each user maintains a collection of \texttt{Trips} and authored \texttt{PathInformation}.

    \item \textbf{Trip and Geolocation}: A \texttt{Trip} is not merely a summary record; it is modeled as a composite entity containing a sequence of \texttt{GeoPoints} (representing the raw GPS trace) and a \texttt{WeatherData} object (representing the meteorological context captured at the time of the trip).

    \item \textbf{Path Information Hierarchy}: To distinguish between different types of user contributions, \texttt{PathInformation} is modeled as an abstract class specialized into:
          \begin{itemize}
              \item \textbf{StatusReport}: For assessing the general condition of the path (e.g., \texttt{OPTIMAL}, \texttt{SUFFICIENT}).
              \item \textbf{ObstacleReport}: For flagging specific hazards (e.g., potholes).
          \end{itemize}

    \item \textbf{Bike Path}: Represents the logical road segment, which is geometrically defined by a set of coordinates.
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=1.0\textwidth]{domain_model_advanced.png}
    \caption{Detailed Domain Model Class Diagram}
    \label{fig:domain_model}
\end{figure}



\subsubsection{Trip Lifecycle}
The recording of a trip is the central functionality of the application. Figure \ref{fig:state_trip} illustrates the state transitions of a Trip entity.
The process begins in the \textit{Idle} state. When the user initiates a recording, the system transitions to the \textit{Recording} state, utilizing GPS sensors. The user may temporarily \textit{Pause} the activity. Upon completion, the system enters a transient state to fetch meteorological data from an external provider before permanently persisting the trip in the \textit{Saved} history.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{state_trip.png}
    \caption{State Diagram: Lifecycle of a Biking Trip}
    \label{fig:state_trip}
\end{figure}

\subsubsection{Path Information Visibility}
Users can contribute to the system by reporting path conditions. To ensure privacy and user control, the system maintains a visibility state for each report.
As shown in Figure \ref{fig:state_info}, a report can be stored as \textit{Private} (visible only to the creator) or \textit{Published} (shared with the community). The user can toggle this state at any time after creation.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{state_info.png}
    \caption{State Diagram: Path Information Visibility States}
    \label{fig:state_info}
\end{figure}

\subsection{Product Functions}
% High-level system functions

The BBP system provides a set of functionalities aimed at supporting individual cyclists in managing their biking activities and route-related information.

The main functions of the system include:
\begin{itemize}
    \item Recording personal biking trips initiated and terminated by the user.
    \item Storing recorded trips and associating them with the user profile.
    \item Allowing users to manually insert information about bike paths based on personal experience.
    \item Managing the visibility of inserted bike path information according to user preferences.
    \item Visualizing possible biking paths between a specified origin and destination on a map.
\end{itemize}

The BBP system does not perform automatic data collection, route optimization, or aggregation of information from multiple users, as these functionalities are outside the scope of the current system.

\subsection{User Characteristics}
The user base of BBP is diverse, yet they share common traits relevant to system design:
\begin{itemize}
    \item \textbf{Demographics}: The system targets a wide age range (16-65+), encompassing students, commuters, and recreational cyclists.
    \item \textbf{Technical Literacy}: Users are assumed to have basic proficiency with smartphones (Android/iOS) and map-based navigation apps. No specialized technical knowledge is required.
    \item \textbf{Usage Patterns}:
          \begin{itemize}
              \item \textit{Active Mode}: Eyes-free or minimal interaction required while riding (large buttons, high contrast).
              \item \textit{Passive Mode}: Detailed interaction (reporting, reviewing history) occurs when stationary.
          \end{itemize}
    \item \textbf{Motivation}: Users are motivated by a mix of "Quantified Self" goals (tracking stats) and "Altruism" (contributing to community safety).
\end{itemize}

\subsection{Assumptions, Dependencies and Constraints}

\subsubsection{Domain Assumptions}
The correct functioning of the BBP system relies on the following assumptions about the domain and the operational environment. If these assumptions do not hold, the system may not be able to fulfill its requirements.

\begin{itemize}
    \item \textbf{D1 - GPS Availability and Accuracy}: It is assumed that the Global Positioning System (GPS) or GNSS is available and provides geolocation coordinates with an accuracy sufficient to distinguish between adjacent streets (typically within 10-15 meters).

    \item \textbf{D2 - Map Service Reliability}: It is assumed that the external Map Service Provider (e.g., Google Maps, OpenStreetMap) provides up-to-date and topologically correct representations of the road network. The system assumes that if a coordinate exists on the map, the corresponding physical location allows passage.

    \item \textbf{D3 - Network Connectivity}: While the recording can happen offline, it is assumed that the user's device has at least intermittent internet connectivity (4G/5G/Wi-Fi) to synchronize data, retrieve weather information, and load map tiles.

    \item \textbf{D4 - User Trustworthiness}: It is assumed that users act cooperatively and provide truthful information when manually inserting path status or reporting obstacles. The system cannot physically verify the existence of a pothole reported by a user.

    \item \textbf{D5 - External Weather Service}: It is assumed that the third-party Weather Service API is operational and maintains historical or real-time weather data for the locations where trips occur.

    \item \textbf{D6 - Device Capability}: It is assumed that the user's smartphone has sufficient battery capacity to maintain GPS tracking and screen activity for the duration of an average biking trip (approx. 1-2 hours).
\end{itemize}

\subsubsection{Dependencies}
The BBP system depends on:
\begin{itemize}
    \item \textbf{External Map APIs}: For rendering maps and calculating routes.
    \item \textbf{Weather Data Providers}: For enriching trip records.
    \item \textbf{App Stores}: For distribution and updates of the mobile application.
\end{itemize}



% =================================================
